if(typeof(Wade.popupMessage)=="undefined"){  Wade.popupMessage=(function(){  var dh=System.DomHelper;  var mdlg,animTask;  var w,h,dlgw=200,dlgh=170,hfH=45,cusorH=0;  var contentstr="";  var popupd=false;  function createDlg(){     if(!mdlg){    w=dh.getViewWidth();    h=dh.getViewHeight();    mdlg=new System.UI.Components.BasicDialog("wade_msg_dlg", {         title:"\u60A8\u6709\u65B0\u7684\u6D88\u606F",         autoCreate:true,         shim:false,                     modal:false,                     shadow:false,                                          resizable:false,                     collapsible:false,                     fixedcenter:false,                     constrain:false,                     constraintoviewport:true,                     width:dlgw,                     height:hfH,                     x:w-dlgw,                     y:h-hfH,                     draggable:false,                     proxyDrag:false             });    mdlg.body.addClass("popupContent");        mdlg.syncBodyHeight();    mdlg.showEl();    mdlg.hide();                  }     if(!animTask){    animTask={     run:dlgAnim,        interval:20    };    }      }  function dlgAnim(){   mdlg.moveTo(w-dlgw,h-cusorH-10);   mdlg.resizeTo(dlgw,cusorH+10);   cusorH+=10;   if(cusorH>dlgh){    mdlg.body.update(contentstr);    popupd=true;    return false;   }    return true;  }  return {   create:function(){    createDlg();    if(!mdlg.hasListener("beforeclose")){     mdlg.on("beforeclose",this.hide,this);      }   },   destroy:function(){    contentstr=null;                     System.TaskMgr.stop(animTask);    animTask=null;   },   popup:function(str){    if(typeof(str)=="string" && str!=""){contentstr=str;}    if(!mdlg){createDlg();}    if(popupd==true){mdlg.body.update(contentstr);return;}    w=dh.getViewWidth();    h=dh.getViewHeight();    mdlg.moveTo(w-dlgw,h-hfH);    mdlg.show();cusorH=hfH;    System.TaskMgr.start(animTask);   },   hide:function(){    if(!mdlg)return false;    w=dh.getViewWidth();    h=dh.getViewHeight();    mdlg.hide();    mdlg.resizeTo(dlgw,hfH);    mdlg.moveTo(w-dlgw,h-hfH);    popupd=false;    return false;   },   setTitle:function(str){    if(!mdlg)return;    mdlg.header.update(str)   },   setContent:function(str){    if(!mdlg)return;    contentstr=str;   }  }; })(); System.EventManager.on(window,"unload",Wade.popupMessage.destroy,Wade.popupMessage);}
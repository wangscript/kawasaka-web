(function(){if(typeof(Wade.component.flipField)=='undefined'){Wade.component.flipField=(function(){ var dom = Wade.dom; var verifylib = Wade.verifylib; return {    flipMouseDown : function(obj, name, mode) {   if (mode == "up") {    if (!this.flipTrigger(name, "up")) return false;   }   if (mode == "down") {    if (!this.flipTrigger(name, "down")) return false;   }   return true;  },    flipKeyDown : function(name) {   if (window.event.keyCode == 38) {    if (!this.flipTrigger(name, "up")) return false;   }   if (window.event.keyCode == 40) {    if (!this.flipTrigger(name, "down")) return false;   }   return true;  },    flipTrigger : function(name, mode) {   var field = dom.getElement(name);   if(!field || !field.nodeType) return false;   var fieldValue = field.value;   var fieldDesc = field.getAttribute("desc");   if (!verifylib.checkText(field, fieldDesc)) return false;      var minValue = field.getAttribute("min");   var maxValue = field.getAttribute("max");   var degreeValue = field.getAttribute("degree");   field.setAttribute("min",null);   field.setAttribute("max",null);   field.setAttribute("degree",null);   if (!verifylib.checkInteger(field, fieldDesc)) return false;      var beforeAction = field.getAttribute("beforeAction");   if (typeof(beforeAction)=="string" && beforeAction != "") {    var beforeActionResult = eval(beforeAction);    if (beforeActionResult != null && beforeActionResult == false) return false;   }   var sumV=parseInt(fieldValue) + parseInt(degreeValue);   var diffV=parseInt(fieldValue)- parseInt(degreeValue);   var condUp=(minValue==null || sumV>=minValue) && (maxValue == null || sumV <= parseInt(maxValue));   var condDown=(maxValue==null || diffV<=maxValue) && (minValue == null || diffV>= parseInt(minValue));   if (mode == "up") {    if(condUp) {     field.value = parseInt(fieldValue) + parseInt(degreeValue);    }   }   if (mode == "down") {    if(condDown){     field.value = parseInt(fieldValue) - parseInt(degreeValue);    }   }   condDown=null;condUp=null;diffV=null;sumV=null;   field.setAttribute("min",minValue);   field.setAttribute("max",maxValue);   field.setAttribute("degree",degreeValue);   if (!verifylib.checkInteger(field, fieldDesc)) return false;         var afterAction = field.getAttribute("afterAction");   if (typeof(afterAction)=="string" && afterAction != ""){    var afterActionResult = eval(afterAction);    if (afterActionResult != null && afterActionResult == false) return false;   }afterAction=null;      return true;  } }})();}})();
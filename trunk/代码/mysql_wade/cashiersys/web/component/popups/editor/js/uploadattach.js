if(typeof(Wade)!="undefined" && typeof(Wade.uploadfile)=="undefined"){ Wade.uploadattach=(function(){  var dh=System.DomHelper;  var upload = Wade.upload;  var page=Wade.page;    var parentWin=parent.window,parentUploadField=null;  if(parentWin){parentUploadField= parentWin.Wade.component.uploadField;  var upload_attach_iframe=null;    var filePath,fileUrl,fileDesc,uploadModes,record,fileKind;  var AUTO_ID=0;  function getSettingObjects(){   upload_attach_iframe=document.getElementById("upload_attach_iframe");   filePath=document.getElementById("FILE_PATH");   fileUrl=document.getElementById("FILE_URL");   fileDesc=document.getElementById("FILE_DESC");   record=document.getElementById("RECORD");   fileKind=document.getElementById("FILE_KIND");   uploadModes=document.getElementsByName("UPLOAD_MODE");  }      function setFileInfo(obj) {       if(!parentUploadField) return;       if(typeof(obj)=="object" && obj.fileId!=""){ parentUploadField.insertUploadFile(obj);return;}     var image = upload.getFileImage(fileUrl.value);     var filename=(fileUrl.value.lastIndexOf(".") != -1 ? upload.getFileName(fileUrl.value) : fileUrl.value);          var fileStr = "<a href='" + fileUrl.value + "'"       + (fileDesc.value != "" ? " title='" + fileDesc.value + "'" : "")       + "style='background-image:url(" + image + ");' class='e_bLinkDownloadNB' "+       + "><span>" + filename + "</span></a>";       var retobj = new Object();       retobj.fileId = "urlfile_" + (AUTO_ID++);       retobj.fileName = filename;       retobj.fileUrl = fileStr;       parentUploadField.insertUploadFile(retobj);  }  return {   setFileInfo:function(obj){    setFileInfo(obj);   },   init:function(){    getSettingObjects();    parentUploadField.addUploadFileDialogOnShowListener(this.initUploadFile,this);    this.initUploadFile();    },   initUploadFile:function(){    page.endPageLoading();    filePath.value="";    filePath.disabled=false;    fileUrl.value="http://";    fileUrl.disabled = true;    record.value=parentUploadField.getRecord();    uploadModes[0].checked = true;   },   selectUploadMode : function() {    if (uploadModes[0].checked) {     filePath.disabled = false;     fileUrl.disabled = true;    }    if (uploadModes[1].checked) {     filePath.disabled = true;     fileUrl.disabled = false;    }   },   uploadFile : function() {    if (uploadModes[0].checked && filePath.value == "") {     alert("\u6587\u4EF6\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A!");     filePath.focus();     return false;    }    if (uploadModes[1].checked && fileUrl.value == "") {     alert("\u6587\u4EF6\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A!");     file_url.focus();     return false;    }    if (uploadModes[1].checked) {     setFileInfo();     this.closeWindow();    }else{     page.beginPageLoading();     page.updateLoadingMsg("\u4E0A\u4F20\u4E2D...");     document.forms[0].submit();    }    return true;   },   closeWindow:function(){    parentUploadField.closeDialog();   }  }; } })();}
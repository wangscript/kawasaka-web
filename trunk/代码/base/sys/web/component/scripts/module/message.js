(function(){ var isPopupPage = isSameDomain(top) && top.window.document.getElementById("PopupAgent") != null; var isMsgPopup = isSameDomain(parent) && parent.wade_sbtframe != null && parent.wade_sbtframe.location.href != "about:blank"; var isDirectPageFlow = isSameDomain(parent) && parent.document.getElementById("flowbody") != null; var isSubmitPageFlow = isMsgPopup && isSameDomain(parent.parent) && parent.parent.document.getElementById("flowbody") != null; var sbtframe = isSameDomain(parent) && parent.document.getElementById("wade_sbtframe"); var isAnalogPopupPage = isSameDomain(top) && parent.window["Wade"] && parent.window["Wade"].dialog.hasOpendDialog();  if(isMsgPopup){  isAnalogPopupPage=parent.parent.window && parent.parent.window["Wade"] && parent.parent.window["Wade"].dialog.hasOpendDialog(); }  if(typeof(Wade.message)=='undefined'){ if (isMsgPopup){  if(typeof(parent.DIF_dragging)=='undefined') { parent.Include('support/dragiframe.js'); }  Include('support/dragiframe.js'); }; Wade.message=(function(){  var dh=System.DomHelper;  var dom=Wade.dom;  var evt=Wade.event;  var page=Wade.page;  var redirect=Wade.redirect;  var util=Wade.util;      return {      initMessage : function() {        var buttonbar = dom.getElement("buttonbar");    var childsLength=System.UserAgent.ie?buttonbar.childNodes.length:buttonbar.children.length;    if (buttonbar && buttonbar.nodeType && childsLength==0) {     var iscurrent = page.isSameDomain(parent) && parent.document.getElementById("navframeset") != null;     var isparent = isMsgPopup && page.isSameDomain(parent.parent) && parent.parent.document.getElementById("navframeset") != null;     var button_1=dh.insertHtml("beforeend",buttonbar,'<input id="BUTTON_1" class="e_button" type="button" value="¹Ø±Õ"/>');          var btevent = isMsgPopup ? "Wade.message.closeMsgPopup" : function(){};     if (isPopupPage || isAnalogPopupPage || iscurrent || isparent || isDirectPageFlow ||isSubmitPageFlow) {      if(isAnalogPopupPage) {       btevent = "Wade.message.closePopupFrame";      } else if (iscurrent || isparent || isDirectPageFlow || isSubmitPageFlow) {       btevent = "Wade.nav.closeNavFrameByLocation";       if (isparent || isDirectPageFlow){        btevent = "parent." + btevent;       } else if (isSubmitPageFlow){        btevent = "parent.parent." + btevent;       }      } else {       btevent = "cancel";      }     }     evt.addObjEventListener("popupClose", "click", btevent);     evt.addObjEventListener("BUTTON_1", "click", btevent);     dom.focus(button_1);     button_1=null;    }    if (buttonbar && buttonbar.nodeType && childsLength != 0) {     dom.focus((System.UserAgent.ie?buttonbar.childNodes[0]:buttonbar.children[0]));    }    buttonbar=null;    if(isMsgPopup){     if(sbtframe && sbtframe.nodeType){      dom.hidden(sbtframe, false);     }     parent.Wade.page.endPageLoading();     parent.Wade.page.beginPageOverlay();     parent.Wade.event.clearEnterEventButton();          dom.hidden("popupMin", false);     dom.hidden("popupMax", false);     dom.focus(document.body);     var titlebar=dom.getElement("titlebar");     if(titlebar)addHandle(titlebar, window);     }    if(isAnalogPopupPage) {     parent.Wade.dialog.recoverCurrentOpenFrame();    }   },      redirectToByMessage : function(obj) {    obj.disabled = true;    var target = obj.getAttribute("target");    if (isMsgPopup || isDirectPageFlow) {     if (target == null || target == "") {      target = "parent";     } else if (target == "parent" || target.startsWith("parent.")) {      target += ".parent";     }    }    if (isSubmitPageFlow) target += ".parent";    redirect.redirectTo(obj.getAttribute("path"), obj.getAttribute("event"), obj.getAttribute("parameters"), target);   },      closeMsgPopup : function() {    parent.Wade.page.endPageOverlay();    if(sbtframe && sbtframe.nodeType){     sbtframe.contentWindow.location.href = "about:blank";     sbtframe.style.display = "none";    }   },      revertPopup : function() {    if (isMsgPopup) {     var pTitle=dom.getElement("PopupTitle");     if(pTitle)pTitle.setAttribute("opertype", "expand");     if(sbtframe && sbtframe.nodeType){      sbtframe.style.width = "400px";      sbtframe.style.height = "300px";      sbtframe.style.marginTop = "-150px";      sbtframe.style.marginLeft = "-200px";     }     var popuparea = dom.getElement("PopupArea");     if(popuparea){      popuparea.style.width = "398px";      popuparea.style.height = "232px";      popuparea.style.marginTop = "-150px";      popuparea.style.marginLeft = "-200px";     }    }   },      expandPopup : function() {    var vwidth = 0, vheight = 0, pwidth = 800, pheight = 600;    if (sbtframe != null) {     vwidth =  parent.System.DomHelper.getViewWidth(true);     vheight = parent.System.DomHelper.getViewHeight(true);    } else {     vwidth =  dh.getViewWidth(true);     vheight = dh.getViewHeight(true);    }    if (vwidth < pwidth) pwidth = vwidth;    if (vheight < pheight) pheight = vheight;        if (isMsgPopup){     var pTitle=dom.getElement("PopupTitle");     if(pTitle)pTitle.setAttribute("opertype", "revert");     if(sbtframe && sbtframe.nodeType){      sbtframe.style.width = pwidth + "px";      sbtframe.style.height = pheight + "px";      sbtframe.style.marginTop = "-" + (pheight / 2) + "px";      sbtframe.style.marginLeft = "-" + (pwidth / 2) + "px";     }     var popuparea = dom.getElement("PopupArea");     if(popuparea){      popuparea.style.width = (pwidth - 2) + "px";      popuparea.style.height = (pheight - 68) + "px";      popuparea.style.marginTop = "-" + (pheight / 2) + "px";      popuparea.style.marginLeft = "-" + (pwidth / 2) + "px";     }     }   },   closePopupFrame : function(){    var popupTarget = isMsgPopup ? parent : self;    popupTarget.Wade.page.cancel(true);    popupTarget.parent.Wade.dialog.recoverCurrentOpenFrame();   },   setReturnFunc:function(pageName, listener, parameters, target){    var popupTarget = isMsgPopup ? parent : self;    popupTarget.setReturnFunc(pageName, listener, parameters, target);   }  } })(); }})();
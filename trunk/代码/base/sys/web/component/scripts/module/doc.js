Wade.doc=(function(){ var dom=Wade.dom; var evt=Wade.event; var page=Wade.page; var validate=Wade.validate;  return {  itemEdit_Init:function(){   var bcreate = dom.getElement("bcreate"); dom.hidden(bcreate, true);     var bupdate = dom.getElement("bupdate"); dom.hidden(bupdate, true);   var bdelete = dom.getElement("bdelete"); dom.hidden(bdelete, true);   var brelease = dom.getElement("brelease"); dom.hidden(brelease, true);      var item_id = dom.getElementValue("ITEM_ID");   var item_status = dom.getElementValue("ITEM_STATUS");   if (item_id == "") {    dom.hidden(bcreate, false);   } else {    if (item_status == "1") {     dom.hidden(bupdate, false);     dom.hidden(bdelete, false);     dom.hidden(brelease, false);    }   }   this.itemEdit_SelItemType();     },  itemEdit_SelItemType:function(){   var item_type = dom.getElementValue("ITEM_TYPE");   dom.getElement("OptionArea").style.display = item_type == "3" || item_type == "4" || item_type == "5" ? "" : "none";   dom.getElement("optionTypeTH").style.display = item_type == "4" || item_type == "5" ? "" : "none";   var optionTypes = dom.getElements("OPTION_TYPE");   for(var i=0; i<optionTypes.length; i++){    optionTypes[i].parentNode.style.display = item_type == "4" || item_type == "5" ? "" : "none";   }  },  itemEdit_AddOption:function(table_name) {   var table = dom.getElement(table_name);   var row = table.insertRow();   var cellOptionId = row.insertCell();   cellOptionId.style.width = "100px";   cellOptionId.innerHTML = "<input type=\"text\" id=\"OPTION_ID\" name=\"OPTION_ID\" value=\"" + (table.rows.length - 1) + "\" desc=\"选项值\" nullable=\"no\" disabled=\"true\" style=\"width:100%\"/>\n";   var cellOptionDesc = row.insertCell();   cellOptionDesc.innerHTML = "<input type=\"text\" id=\"OPTION_DESC\" name=\"OPTION_DESC\" desc=\"选项描述\" nullable=\"no\" style=\"width:100%\"/>\n";      var optionConfigs = dom.getElements("OPTION_CONFIG");   for (var i=0; i<optionConfigs.length; i++) {    var optionConfig = optionConfigs[i];    var conf_name = optionConfig.getAttribute("conf_name");    var conf_desc = optionConfig.getAttribute("conf_desc");    var conf_param = optionConfig.getAttribute("conf_param");        var cellOptionExpand = row.insertCell();    var fieldOptionExpand = document.createElement("INPUT");    fieldOptionExpand.type = "text";    fieldOptionExpand.style.width = "100%";    fieldOptionExpand.id = conf_name;    fieldOptionExpand.name = conf_name;    fieldOptionExpand.setAttribute("desc", conf_desc);    if (conf_param != null) {     var optionParams = conf_param.split(";");     for (var j=0; j<optionParams.length; j++) {      var optionParam = optionParams[j];      fieldOptionExpand.setAttribute(optionParam.split("=")[0], optionParam.split("=")[1]);     }    }    cellOptionExpand.appendChild(fieldOptionExpand);   }   var item_type = dom.getElementValue("ITEM_TYPE");   var cellOptionId = row.insertCell();   cellOptionId.style.width = "100px";   cellOptionId.style.display = item_type == "4" || item_type == "5" ? "" : "none";   cellOptionId.innerHTML = "<input type=\"radio\" id=\"OPTION_TYPE\" name=\"OPTION_TYPE\" value=\"" + (table.rows.length - 1) + "\" desc=\"是否添加文本框\" style=\"width:100%\"/>\n";      var cellOptionOper = row.insertCell();   cellOptionOper.style.width = "40px";   cellOptionOper.className = "timemode";   cellOptionOper.innerHTML = "<div class=\"operation\"><a href=\"javascript:void(0)\" onclick=\"javascript:Wade.doc.itemEdit_DelOption('OptionList', this.parentNode.parentNode.rowIndex)\" class=\"e_bLinkDeleteNB\"><span>删除</span></a></div>\n";  },  itemEdit_DelOption:function(table_name, row_index) {   var table = dom.getElement(table_name);   table.deleteRow(row_index);   var options = dom.getElements("OPTION_ID");   for (var i=0; i<options.length; i++) {    var option = options[i];    option.value = (i + 1);   }  },  itemEdit_ValidItemOptions:function() {   var item_type = dom.getElementValue("ITEM_TYPE");   if (item_type == "3" || item_type == "4" || item_type == "5") {    if (getBoxNum("OPTION_ID") == 0) {     alert("请新增项目选项！");     return false;    }   }   return true;  },  templateEdit_Init:function(){   var bcreate = dom.getElement("bcreate"); dom.hidden(bcreate, true);     var bupdate = dom.getElement("bupdate"); dom.hidden(bupdate, true);   var bdelete = dom.getElement("bdelete"); dom.hidden(bdelete, true);   var bpreview = dom.getElement("bpreview"); dom.hidden(bpreview, true);   var brelease = dom.getElement("brelease"); dom.hidden(brelease, true);      var temp_id = dom.getElementValue("TEMP_ID");   var temp_status = dom.getElementValue("TEMP_STATUS");   if (temp_id == "") {    dom.hidden(bcreate, false);   } else {    if (temp_status == "1") {     dom.hidden(bupdate, false);     dom.hidden(bdelete, false);     dom.hidden(brelease, false);    }    dom.hidden(bpreview, false);   }   this.templateEdit_SwitchSelectedItems();      evt.addObjEventListener("document.getElementById('AVAILABLE_ITEM')", "dblclick", this.templateEdit_SwitchSelectedItems);   evt.addObjEventListener("document.getElementById('SELECTED_ITEM')", "dblclick", this.templateEdit_SwitchSelectedItems);   evt.addObjEventListener("document.getElementById('AVAILABLE_ITEM_SELECTED_ITEM_left')", "click", this.templateEdit_SwitchSelectedItems);   evt.addObjEventListener("document.getElementById('AVAILABLE_ITEM_SELECTED_ITEM_right')", "click", this.templateEdit_SwitchSelectedItems);     },  templateEdit_SwitchSelectedItems:function(){   var switchLabel = dom.getElement("switchLabel");   var switchArea = dom.getElement("switchArea");      var nullables = dom.getElementValue("NULLABLES");   var selectedItems = dom.getElement("SELECTED_ITEM").options;   switchArea.innerHTML = "";      for (var i=0; i<selectedItems.length; i++) {    var item = selectedItems[i];    var child = document.createElement("SPAN");    child.innerHTML = "<input type='checkbox' id='NULLABLE_ITEM' name='NULLABLE_ITEM' value='" + item.value + "'" + (nullables.indexOf(item.value) != -1 ? "checked" : "") + "/>" + item.text + "\n";    switchArea.appendChild(child);   }   dom.hidden(switchLabel, selectedItems.length == 0);   dom.hidden(switchArea, selectedItems.length == 0);     },  templateEdit_VerifySelectedItems:function(){   var selectedItems = dom.getElement("SELECTED_ITEM").options;   if (selectedItems.length == 0) {    alert("已选列表不能为空！");    return false;   }   return true;     },  templateEdit_SubmitTemplet:function(obj){   dom.selectedAll("SELECTED_ITEM");   if (!this.templateEdit_VerifySelectedItems()) return false;   return validate.confirmForm(obj);     }     };})();
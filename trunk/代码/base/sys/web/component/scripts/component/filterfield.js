(function(){if(typeof(Wade.component.filterfield)=='undefined'){Wade.component.filterfield=(function(){ var dom = Wade.dom; var ajax = Wade.ajax; return {  addEvent : function(el, evname, func) {   System.EventManager.on(el,evname,func);  },  removeEvent : function(el, evname, func) {   System.EventManager.un(el,evname,func);  },  keyEventBefore : function (name, text, funcname, func) {   if (event.keyCode != 13) {Wade.event.stopEvent()};   getElement('OPT_'+name).style.display='block';   setAjaxLoading(false);   try{func!=null;eval(func);}catch(r){};   setTimeout(function(){    getElement('OPT_'+name).style.display='block';    getElement(text).focus();    setAjaxLoading(true);   }, 300);   Wade.event.stopEvent()  },  select : function(obj){   var fieldname = obj.getAttribute('fieldname');   var textname = obj.getAttribute('textname');   dom.getElement(fieldname).value=obj.getAttribute('key');   dom.getElement(textname).value=obj.getAttribute('key');      var rowIndex = obj.getAttribute('rowIndex');   var pitem = dom.getElement('UL_'+fieldname);   var item = dom.getElement('LI_'+fieldname+'_'+rowIndex);   pitem.innerHTML = item.outerHTML;   dom.hidden('OPT_'+fieldname, true);  } }})();}})();
(function(){var dh=System.DomHelper;if(typeof(Wade)=="undefined") return;if(typeof(Wade.component.TabItem)=='undefined'){ Wade.component.TabItem=function(_caption,_container){  if(typeof(_caption)=='object'){   System.apply(this,_caption);  }else{   this.caption=_caption;   this.container=_container;    }  this._constructor(); }; Wade.component.TabItem.prototype={  _constructor:function() {   this.active=false;   this._id=Wade.component.TabSetManager.getUniqueID();  },  show:function(){   var el=System.fly("TabSet_" + this.tabSetId + "_tabCap_" + this._id);   if(el){el.enableDisplayMode("inline");el.setVisible(true);}el=null;    },  hidden:function(){   var el=System.fly("TabSet_" + this.tabSetId + "_tabCap_" + this._id);   if(el){el.enableDisplayMode("inline");el.setVisible(false);}el=null;    },  getWidth:function(){   if(typeof(this.height)=='undefined'){    var el=System.fly("TabSet_" + this.tabSetId + "_tabCap_" + this._id);    if(el){this.width=el.getWidth();}el=null;   }   return this.width;    },  getHeight:function(){   if(typeof(this.height)=='undefined'){    var el=System.fly("TabSet_" + this.tabSetId + "_tabCap_" + this._id);    if(el){this.height=el.getHeight();}el=null;   }   return this.height;     },  render:function(){   var strArr=new Array();   strArr.push('<a href="javascript:void(0);" onfocus="this.blur();" class="li" onclick="Wade.component.TabSetManager.getTabSetInstance('+this.tabSetId+').switchTo(' + this._id + ');" >');   strArr.push('<span class="top"></span><span class="text">' + this.caption + '</span><span class="bottom"></span>');   strArr.push('</a>');      return strArr.join('');    },  draw:function(){   var me=this;   setTimeout(function(){    if(me.active!=true && me.container && me.container.nodeType){me.container.style.display = 'none';}    var tabSet=Wade.component.TabSetManager.getTabSetInstance(me.tabSetId);    if(tabSet){     tabSet.tabsContainer.createChild({tag:"li",id:("TabSet_" + me.tabSetId + "_tabCap_" + me._id),cls:(me.active==true)?"on":"",html:me.render()});    }   },10);  },  destroy:function(){   this.caption=null;   this.container=null;  } };}if(typeof(Wade.component.TabSet)=='undefined'){  Wade.component.TabSet=function(outerElmId, style){    this.style = (typeof(style)!="undefined" && style) ? style  : "top";  this._outerElmId = outerElmId;  this._id=null;  this._objectId=null;  this._activeTabIdx = -1;  this._onTabSelectEvent=null;  this.pages=[];  this.currentPage=0;  this.activeTabs=[];  this.tabs = new System.MixedCollection();  this._constructor();  }; Wade.component.TabSet.prototype={  _constructor:function() {   this._id = Wade.component.TabSetManager.getUniqueID();   this._objectId = "TabSet_" + this._id;   this.el=System.get(this._outerElmId);   this.pos=(this.style=="top" || this.style=="bottom")?0:1;   if(this.el){    this.el.addClass("c_" + this.style + "TabPageWrapper");    this.frameEl=this.el.wrap({tag:"div",cls:"c_" + this.style + "TabPage"});    if(this.frameEl){     ewrap=this.frameEl.wrap({tag:"div",cls:"c_" + this.style + "TabPageAutoOff"});    }        this.tabsBody=System.get(this._outerElmId + "_tabs");    if(this.tabsBody){     this.tabsBody.addClass("wrapper3");     ewrap=this.tabsBody.wrap({tag:"div",cls:"wrapper2"});     if(ewrap) ewrap=ewrap.wrap({tag:"div",cls:"wrapper"});     if(ewrap) ewrap=ewrap.wrap({tag:"div",cls:"c_" + this.style + "TabPageTab"});          if(ewrap) this.header=ewrap.wrap({tag:"div",cls:"c_" + this.style + "TabPageFlowOff"});     this.tabsContainer=this.tabsBody.createChild({tag:"ul"});     if(this.pos==1)this.tabsBody.setHeight(300);    }            if(this.header){     this.buttons=this.header.createChild({tag:"div",cls:"c_" + this.style + "TabPageTurner",html:"<ul>" +       "<li><a href=\"javascript:void(0);\" onfocus=\"this.blur();\" title=\"\u524D\u79FB\u6807\u7B7E\u7EC4\" onclick=\"javascript:Wade.component.TabSetManager.getTabSetInstance('"+this._id+"').displayPreviousTabs();\" class=\"pre\"></a></li>" +       "<li><a href=\"javascript:void(0);\" onfocus=\"this.blur();\" title=\"\u540E\u79FB\u6807\u7B7E\u7EC4\" onclick=\"javascript:Wade.component.TabSetManager.getTabSetInstance('"+this._id+"').displayNextTabs();\" class=\"next\"></a></li>" +       "<li><a href=\"javascript:void(0);\" onfocus=\"this.blur();\" title=\"\u590D\u4F4D\u6807\u7B7E\u7EC4\" onclick=\"javascript:Wade.component.TabSetManager.getTabSetInstance('"+this._id+"').displayFirstPageTabs();\" class=\"default\"></a></li>" +      "</ul>"});    }        var wrapper=System.get(this._outerElmId + "_content");    if(wrapper){     wrapper.addClass("c_" + this.style + "TabPageContentWrapper");     this.body=wrapper.wrap({tag:"div",cls:"c_" + this.style + "TabPageContent"});     if(this.body){      this.body.setStyle("height","auto");      this.body.wrap({tag:"div",cls:"c_" + this.style + "TabPagePage"});     }    }wrapper=null;   }      Wade.component.TabSetManager.addTabSet(this);   System.EventManager.onWindowResize(this.adjustViewport, this, true);  },  setContentHeight:function(height){   if(this.body){this.body.setHeight(height);}  },  addTab:function(caption,container){   var me=this;       var tab=new Wade.component.TabItem(caption,container);    tab.tabSetId=me._id;            if(me.tabs.length==0)tab.active=true;    me.tabs.add(tab._id,tab);     },  hidden:function(){   var c=document.getElementById(this._outerElmId + '_tabs');   if(c && c.nodeType){c.style.display="none";}c=null;  },  show:function(){   var c=document.getElementById(this._outerElmId + '_tabs');   if(c && c.nodeType){c.style.display="block";}c=null;    },  draw:function() {   var me=this;   if(this.header){    if(this.showFlow){     this.header.replaceClass("c_" + this.style + "TabPageFlowOff","c_" + this.style + "TabPageFlowOn");     this.flow=this.header.createChild({tag:"div",cls:"showFlowPic",html:"<a class=\"button\" href=\"javascript:void(0)\">" +      "<span class=\"top\"></span>" +      "<span class=\"text\"><span>\u6D41\u7A0B\u56FE</span></span>" +      "<span class=\"bottom\"></span>" +      "</a>"});    }        }      setTimeout(function(){    me.tabs.each(function(tab,index){     tab.draw();    });    me.adjustViewport();     },10);  },  adjustMoveButtons:function(){   if(this.buttons){    this.buttons.enableDisplayMode("");    if(this.pages.length>1 && !(this.pages[0][1]<0)){     this.buttons.setVisible(true);    }else{this.buttons.setVisible(false);}   }  },  displayFirstPageTabs:function(){   var me=this; var pageNum=0;   setTimeout(function(){    if(pageNum>=0 && typeof(me.pages[pageNum])=='object'){     var hasActive=false;     me.tabs.each(function(tab,index){      if(index<me.pages[pageNum][0] || index>me.pages[pageNum][1]){tab.hidden();}      else{tab.show();if(me.activeTabs[pageNum]==tab._id){hasActive=true;}}     });me.currentPage=pageNum;     if(hasActive==true){      me.switchTo(me.activeTabs[pageNum]);     }      }    },10);     },  displayPreviousTabs:function(){   var me=this; var pageNum=me.currentPage-1;   setTimeout(function(){    if(pageNum>=0 && typeof(me.pages[pageNum])=='object'){     var hasActive=false;     me.tabs.each(function(tab,index){      if(index<me.pages[pageNum][0] || index>me.pages[pageNum][1]){tab.hidden();}      else{tab.show();if(me.activeTabs[pageNum]==tab._id){hasActive=true;}}     });me.currentPage=pageNum;     if(hasActive==true){      me.switchTo(me.activeTabs[pageNum]);     }      }    },10);  },  displayNextTabs:function(){   var me=this; var pageNum=me.currentPage+1;   setTimeout(function(){    if(typeof(me.pages[pageNum])=='object'){     var hasActive=false;     me.tabs.each(function(tab,index){      if(index<me.pages[pageNum][0] || index>me.pages[pageNum][1]){tab.hidden();}      else{tab.show();if(me.activeTabs[pageNum]==tab._id){hasActive=true;}}     });me.currentPage=pageNum;     if(hasActive==true){      me.switchTo(me.activeTabs[pageNum]);     }      }   },10);  },  switchTo:function(theReg) {   var me=this;   newRegIdx = -1;   if (theReg=='') theReg = '0';   if (isNaN(parseInt(theReg))) {    this.tabs.each(function(tab){     if(tab.caption==theReg){newRegIdx=tab._id;}    });   } else {    newRegIdx = theReg;   }   if (newRegIdx<0) return;   setTimeout(function(){    me.tabs.each(function(tab,index){     var elem = document.getElementById(me._objectId + "_tabCap_" + tab._id);     if (!elem || !elem.nodeType){return;}     if (newRegIdx == tab._id) {            me.activeTabs[me.currentPage]=tab._id;      tab.active=true;      elem.className = "on";      tab.container.style.display = 'block';      if (typeof(tab.onFocus) != 'undefined') {       me._triggerFunction(tab.onFocus);      }      me.fireOnTabSelect();     } else {      elem.className = "";      tab.container.style.display = 'none';      if (typeof(tab.onBlur) != 'undefined') {       me._triggerFunction(tab.onBlur);      }     }elem=null;    });   },10);   },  getActiveTab:function() {   return this.tabs.get(this.activeTabs[this.currentPage]);  },  onTabSelect:function(yourEvent) {   this._onTabSelectEvent = yourEvent;  },  fireOnTabSelect:function() {   if (this._onTabSelectEvent) {    func = this._onTabSelectEvent;    if (this._onTabSelectEvent == 'string') {     eval(func);    } else {     func(this);    }   }   return true;  },  _triggerFunction:function(func) {   if (typeof(func) == 'function') {    func();   } else if (typeof(func) == 'string') {    eval(func);   }  },  adjustViewport:function(viewWidth){   var me=this;me.pages=[],me.currentPage=0;me.activeTabs=[];   var c=document.getElementById(this._outerElmId + '_tabs');   if(!c)return;c=null;   var w=(me.pos==0)?me.frameEl.getWidth():me.frameEl.getHeight(),tw=0,n=0;   if(!(w>0))return false;   var tl=this.tabs.length;   var ttw=0,f=false,ff=false;   setTimeout(function(){    me.tabs.each(function(tab,index){     ttw=(me.pos==0)?tab.getWidth():tab.getHeight();tw+=ttw;     if(tw>(w-120)){      me.pages.push([n,index-1]);n=index;      tw=ttw;f=true;ff=true;     }if(index==(tl-1) && (f==false || ff==true)){      me.pages.push([n,index]);     }     f=false;    });   },10);    var tab,tabId;   for(var i=0;i<me.pages.length;i++){    tab=me.tabs.itemAt(me.pages[i][0]);     if(tab){tabId=tab._id;}else{tabId=-1;}    me.activeTabs[i]=tabId;   }   setTimeout(function(){    me.tabs.each(function(tab,index){     if(index<me.pages[0][0] || index>me.pages[0][1]){tab.hidden();}else{tab.show();}    });    me.adjustMoveButtons();   },10);   },  destroy:function(){   System.destroy(this.el);   System.destroy(this.frameEl);   System.destroy(this.tabsBody);   System.destroy(this.header);   System.destroy(this.tabsContainer);   System.destroy(this.buttons);   System.destroy(this.body);        this.pages=[];delete this.pages;this.pages=null;   this.activeTabs=[];delete this.activeTabs;this.activeTabs=null;   this.tabs.each(function(tab){tab.destroy();});   this.tabs.clear();   delete this.tabs;   this.tabs=null;  } }; window['TabSet']=Wade.component.TabSet}if(typeof(Wade.component.TabSetManager)=='undefined'){ Wade.component.TabSetManager=(function(){  var tabSetCollection=new System.MixedCollection();  return {   tabSet_AUTOID:0,   getUniqueID:function(){    return ++this.tabSet_AUTOID;   },   addTabSet:function(tabset){    if (tabSetCollection==null)tabSetCollection=new System.MixedCollection();    tabSetCollection.add(tabset._id,tabset);   },   getTabSetInstance:function(id){    return tabSetCollection.get(id);   },   destroy:function(){    if (tabSetCollection == null) return;    tabSetCollection.each(function(tabset){     tabset.destroy();    });    tabSetCollection.clear();    delete tabSetCollection;    tabSetCollection=null;   }  }; })();} })();
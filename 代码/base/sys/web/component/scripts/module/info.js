Wade.info=(function(){ var dom = Wade.dom; var evt=Wade.event; var page=Wade.page; var validate=Wade.validate; var ajax= Wade.ajax; return {    initMessageEdit : function() {   var bcreate = dom.getElement("bcreate"); dom.hidden(bcreate, true);     var bdelete = dom.getElement("bdelete"); dom.hidden(bdelete, true);   var breply = dom.getElement("breply"); dom.hidden(breply, true);     var bforward = dom.getElement("bforward"); dom.hidden(bforward, true);      var inst_id = dom.getElementValue("INST_ID");   if (inst_id == "") {    dom.hidden(bcreate, false);   } else {    dom.hidden(bdelete, false);    dom.hidden(breply, Wade.context.getPageVisit().provinceId == 'HAIN' ? true : false);    dom.hidden(bforward, false);        dom.hidden(dom.getElement("ReceArea"), true);    dom.getElement("RECE_OBJS").nullable = "";    dom.getElement("POP_RECE_OBJS").nullable = "";        dom.getElement("INFO_TOPIC").readOnly = true;    dom.getElement("INFO_CONTENT").readOnly = true;   }  },    replyInfo : function() {   var info_topic = dom.getElement("INFO_TOPIC");   var info_content = dom.getElement("INFO_CONTENT");   dom.hidden(dom.getElement("bcreate"), false);   dom.hidden(dom.getElement("bdelete"), true);   dom.hidden(dom.getElement("breply"), true);   dom.hidden(dom.getElement("bforward"), true);      dom.hidden(dom.getElement("ReceArea"), true);   dom.getElement("RECE_OBJS").nullable = "";   dom.getElement("POP_RECE_OBJS").nullable = "";      dom.hidden(dom.getElement("EDITOR_DIV_INFO_CONTENT"), true);   disabledEditor("INFO_CONTENT",false);      var currentEditor=System.component.EditorManager.getActive();   if(currentEditor){    currentEditor.writeEditorContents("");    currentEditor.checkFocus();   }      info_topic.value = "RE:" + info_topic.value;      info_content.readOnly = false;   info_content.readOnly = false;   page.endPageLoading();  },    forwardInfo : function() {   dom.hidden(dom.getElement("bcreate"), false);   dom.hidden(dom.getElement("bdelete"), true);   dom.hidden(dom.getElement("breply"), true);   dom.hidden(dom.getElement("bforward"), true);      dom.hidden(dom.getElement("ReceArea"), false);   dom.getElement("RECE_OBJS").nullable = "no";   dom.getElement("POP_RECE_OBJS").nullable = "no";      var info_topic = dom.getElement("INFO_TOPIC");   info_topic.value = "FW:" + info_topic.value;      dom.getElement("RECE_OBJS").value = "";   dom.getElement("POP_RECE_OBJS").value = "";      dom.getElement("INFO_TOPIC").readOnly = false;   dom.getElement("INFO_CONTENT").readOnly = false;   disabledEditor("INFO_CONTENT",false);      var currentEditor=System.component.EditorManager.getActive();   if(currentEditor){        currentEditor.checkFocus();   }      page.endPageLoading();  },  initBulletinEdit:function(){   var bcreate = dom.getElement("bcreate"); dom.hidden(bcreate, true);     var bdelete = dom.getElement("bdelete"); dom.hidden(bdelete, true);      var inst_id = dom.getElementValue("INST_ID");   if (inst_id == ""){    dom.hidden(bcreate, false);   }else {    if (dom.getElementValue("cond_QUERY_MODE") == "send") {     dom.hidden(bdelete, false);    }        dom.hidden(dom.getElement("ReceLableArea"), true);    dom.hidden(dom.getElement("ReceFieldArea"), true);    var el;    if(el=dom.getElement("INFO_TOPIC"))el.readOnly = true;    if(el=dom.getElement("INFO_CONTENT"))el.readOnly = true;   }     },  initAddressList:function(){   isPopupPage = top.window.document.getElementById("PopupAgent") != null;      dom.hidden(dom.getElement("bsubmit"), true);   dom.hidden(dom.getElement("bupdate"), true);   dom.hidden(dom.getElement("bselect"), !isPopupPage);   dom.hidden(dom.getElement("bcancel"), !isPopupPage);     },    createAddressGroup:function () {   if (!validate.confirmForm("GroupEditArea")) return false;   ajax.ajaxSubmit("component.info.AddressList", "createAddressGroup", null, "GroupListPart,GroupSelectPart");   return true;  },    updateAddressGroup:function() {   if (dom.getElementValue("GROUP_ID") == "") {    alert("请选择要修改的组！");    return false;   }   if (!validate.confirmForm("GroupEditArea")) return false;   ajax.ajaxSubmit("component.info.AddressList", "updateAddressGroup", null, "GroupListPart,GroupSelectPart");   dom.hidden(dom.getElement("bupdate"), true);   return true;  },    deleteAddressGroup:function (obj) {   if (!validate.confirmInfo(obj, "删除组将同时删除组中所有地址簿，确定删除吗？")) return false;   ajax.ajaxDirect("component.info.AddressList", "deleteAddressGroup", "&GROUP_ID=" + obj.getAttribute("group_id"), "GroupListPart,GroupSelectPart,AddressListPart,AddressPaginPart,AddressCtrlPart");   return true;  },    moveAddresss:function(obj) {   if (dom.getElementValue('cond_GROUP_ID') == obj.getAttribute('group_id')) {    alert("不能转移给地址薄所在组！");    return false;   }   if (!validate.confirmInfo(this, '确定转移地址簿吗？')) return false;dom.hidden(dom.getElement('GroupSelectPane'), true);   ajax.ajaxSubmit('component.info.AddressList', 'moveAddresss', '&TARGET_GROUP_ID=' + obj.getAttribute('group_id') + '&ADDRS=' + dom.getCheckedBoxStr('addrs'), 'AddressListPart,AddressPaginPart');   return true;  },    addressListSelectStaffs:function() {   evt.addObjEventListener("document.getElementById('STAFF_ID')", "propertychange", submitStaffs);    evt.fireMouseEvent('POP_IMG_STAFF_ID',"click");  },  addressListSubmitStaffs:function() {   evt.fireMouseEvent("bsubmit","click");  },    addressListCheckedStaffs:function() {   var staffids = "", staffnames = "";   var addrs = dom.getElements("addrs");   for (var i=0; i<addrs.length; i++) {    var addr = addrs[i];    if (addr.checked) {     var addrprop = addr.value.split(";");          staffids += (staffids == "" ? "" : ",") + addrprop[1];     staffnames += (staffnames == "" ? "" : ",") + addrprop[2];    }   }   Wade.dialog.setReturnValue(staffids, staffnames);  }         }})();